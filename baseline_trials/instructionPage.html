{{ block title }}

<p style="text-align: center; font-size: 26px;  ">
    Instructions:
    {% if "0DG" in player.treatment and player.round_number < 14 %}
        Part 1
    {% endif %}
    {% if "2PP" in player.treatment and player.round_number < 14%}
        Part 2
    {% endif %}
    {% if "3PP" in player.treatment and player.round_number < 14%}
        Part 3
    {% endif %}
    {% if "3PR" in player.treatment and player.round_number < 14%}
        Part 4
    {% endif %}
    {% if "3PC" in player.treatment and player.round_number < 14%}
        Part 5
    {% endif %}
    {% if "3PC" in player.treatment %}
        {% if "IN" in player.treatment or "OUT" in player.treatment %}
            Part 6
        {% endif %}
    {% endif %}
    {% if "3PP" in player.treatment  %}
        {% if "IN" in player.treatment or "OUT" in player.treatment %}
            Part 7
        {% endif %}
    {% endif %}
    {% if "3PP country" in player.treatment %}
        Part 8
    {% endif %}
</p>

<div style="display: flex; justify-content: center">
    <label>
<!--        Step {{ participant.progress }} of {{ C.total_pages }}-->
        <progress value="{{ participant.progress }}" max="{{ C.total_pages }}">
        </progress>
    </label>
</div>


{{ endblock }}
{{ block content }}

<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


<script>

    /////////// global variables

    const TP_points = {{ C.TP_points }}; // punishment points
    const TP_eff = {{ C.TP_effectiveness }}; // punishment or reward or victim compensation effectiveness

    total_endowment = {{ C.total_endowment }}
    receiver_endowment = {{ C.receiver_endowment }}


    var current_treatment = "{{ treatment }}";
    var current_treatment_short = "{{ treatment_type }}";
    var current_round_number = "{{ player.round_number }}";

    // Store last clicked row type for TP
    let lastClickedRowType = null;
    let lastClickedValue = 0;

    /// TP has some additional code here:
    if (current_treatment_short.includes("2PP") || current_treatment_short.includes("3PP") || current_treatment_short.includes("3PR") || current_treatment_short.includes("3PC") && current_round_number < 14){

        // Function to update the coin stack (TP_decisions only)
        function updateCoinStackTP(count, row) {

            console.log('updateCoinStackTP ', count)

            const TPupdate = coins_diff - count;
            let dictator_recipient_TPeffectUpdate = count * TP_eff;

            let Dupdate = coins_diff - (count * TP_eff); // Assuming TP_decision.dictator_keeps = TP_points
            Cupdate = count* TP_eff // compensation updating

            console.log('updateCoinStackTP  Dupdate', Dupdate)


            if (Dupdate < 0 && (current_treatment.includes("punish") || current_treatment.includes("3PP country") || current_treatment.includes("comp"))) {
                dictator_recipient_TPeffectUpdate += Dupdate; // Prevent exceeding max endowment
                Dupdate = 0;
            }

            if (current_treatment.includes("3PR")) {
                Dupdate = coins_diff; // Leave dictator coins unchanged in 3PR
            }

            // Clear existing stacks
            if (row !== "compensate") {
                $('.coinstackTP, .coinstackD-TP, .coinstackDDes, .coinstackDDes2PP, .coinstackTP2PP, .coinstackTP3PR').empty();
            }
            if (row !== "punish") {
                $('.coinstackTP3PC').empty();
            }

            // Add the specified number of coins
            if (row !== "compensate") {
                for (let i = 0; i < TPupdate; i++) {
                    $('.coinstackTP').append('<div class="coinown" style="left:75%;"></div>');
                }

                for (let i = 0; i < Dupdate; i++) {
                    $('.coinstackD-TP').append('<div class="coin" style="left:14%;"></div>');
                }

                for (let i = 0; i < dictator_recipient_TPeffectUpdate; i++) {
                    $('.coinstackDDes').append('<div class="coin_destroyed" style="left:5%;"></div>');
                }
            }

            console.log('Dupdate', Dupdate)

            // Update other stacks for subconditions: 2PP, 2PR, 3PC
            for (let i = 0; i < TPupdate; i++) {
                $('.coinstackTP2PP').append('<div class="coinown2PP" style="left:83%;"></div>');
            }

            for (let i = 0; i < dictator_recipient_TPeffectUpdate; i++) {
                $('.coinstackTP3PR').append('<div class="coinown3PR" style="left:7%;"></div>');
            }

            if (row !== "punish") {
                for (let i = 0; i < Cupdate; i++) {
                    $('.coinstackTP3PC').append('<div class="coinown3PC" style="left:90%;"></div>');
                }
            }

            for (let i = 0; i < dictator_recipient_TPeffectUpdate; i++) {
                $('.coinstackDDes2PP').append('<div class="coin_destroyed2PP" style="left:55%;"></div>');
            }

            // Update the number labels
            if (row !== "compensate") {
                $('#countTP').text(`${TPupdate}`);
                $('#countD').text(`${Dupdate}`);
                $('#countDDes').text(`${dictator_recipient_TPeffectUpdate}`);
                $('#countDDes2PP').text(`${dictator_recipient_TPeffectUpdate}`);
                $('#countTP2PP').text(`${TPupdate}`);
                $('#countTP3PR').text(`${dictator_recipient_TPeffectUpdate}`);
                console.log('updateCoinStackTP dictator_recipient_TPeffectUpdate', dictator_recipient_TPeffectUpdate)

            }
            if (row !== "punish") {
                $('#countTP3PC').text(`${Cupdate}`);
            }

        }


        // Hover function calling updateCoinStack - Updates the hovered row and resets the other row
            $(document).on('mouseenter', '.number', function () {
                const value = $(this).data('value');  // Get number value
                const row = $(this).closest('.number-row-comp').length ? "compensate" : "punish"; // Detect row type

                //console.log('Hover triggered. Value:', value, 'Index:', index, 'Row:', row);

                // Update the hovered stack
                updateCoinStackTP(value, row);

                // Reset the other stack while hovering
                const otherRow = row === "punish" ? "compensate" : "punish";
                updateCoinStackTP(0, otherRow);
            });



            // Mouse leave function - Ensures only one updated stack remains
            $(document).on('mouseleave', '.number-row, .number-row-comp', function () {
                //const index = $(this).data('index');
                //restoreRowState(index);
                console.log('lastClickedRowType lastClickedValue', lastClickedRowType, lastClickedValue)
                // Restore function - Ensures only one stack stays updated after hovering
                if (lastClickedRowType) {
                    updateCoinStackTP(lastClickedValue, lastClickedRowType); // Restore clicked stack
                    updateCoinStackTP(0, lastClickedRowType === "punish" ? "compensate" : "punish"); // Reset other stack
                    //console.log(`Restoring last clicked stack: ${lastClickedRowType} at index ${index}`);
                } else {
                    // Reset both if nothing was clicked
                    updateCoinStackTP(0, "punish");
                    updateCoinStackTP(0, "compensate");
                    //console.log(`Resetting both stacks at index ${index}`);
                }
            });





    }

////////////// function for displaying the task, numbers, and labels and managing the click event

    $(document).ready(function () {

        if (current_treatment.includes("country") || current_treatment.includes("universal norm") || current_treatment.includes("OUT") || current_treatment.includes("IN") ) {
            receiverCountry = "{{ recip_identity }}"
            dictatorCountry = "{{ dic_identity }}"
            // get flags
            $('.receiverCountry').attr('src', '/static/global/flags/' + receiverCountry +'.png');
            $('.dictatorCountry').attr('src', '/static/global/flags/' + dictatorCountry +'.png');

            // get maps
            $('.receiverCountryMap').attr('src', '/static/global/worldmap/' + receiverCountry +'.png');
            $('.dictatorCountryMap').attr('src', '/static/global/worldmap/' + dictatorCountry +'.png');
        }

        // Set the default display text for TP cost
        $('#TP-cost-display').text('_');

        // Set the default display text of the clicked number
        $('#trial-dic1-display').text('___');
        $('#trial-dic2-display').text('___');
        $('#trial-norm1-display').text('___________________');
        $('#trial-norm2-display').text('___________________');
        $('#trial-2PP-display').text('___');
        $('#trial-3PP-display').text('___');
        $('#trial-3PR-display').text('___');
        $('#trial-3PC-display').text('___');
        $('#trial-3PC-row1-display').text('______');
        $('#trial-3PC-row2-display').text('______');

        // Define labels of appropriateness for displaying clicked norm
        const valueToLabel = {
            0: "very socially inappropriate",
            1: "socially inappropriate",
            2: "slightly socially inappropriate",
            3: "slightly socially appropriate",
            4: "socially appropriate",
            5: "very socially appropriate"
        };

        // Set the dictator and receiver coins for norm test rounds, depending on condition
        if (current_treatment_short.includes("0DG") ) {
            coins =  "{{ random_trial_numbers.0 }}"
            coins_diff = "{{ random_trial_numbers_diff.0 }}"
        }
        else if (current_treatment_short.includes("2PP") && current_round_number < 14){
            coins =  "{{ random_trial_numbers.1 }}"
            coins_diff = "{{ random_trial_numbers_diff.1 }}"
        }
        else if (current_treatment_short.includes("3PP") && current_round_number < 14){
            coins =  "{{ random_trial_numbers.2 }}"
            coins_diff = "{{ random_trial_numbers_diff.2 }}"
        }
        else if (current_treatment_short.includes("3PR") && current_round_number < 14){
            coins =  "{{ random_trial_numbers.3 }}"
            coins_diff = "{{ random_trial_numbers_diff.3 }}"
        }
        else if (current_treatment_short.includes("3PC") && current_round_number < 14){
            coins =  "{{ random_trial_numbers.4 }}"
            coins_diff = "{{ random_trial_numbers_diff.4 }}"
        }
        else {
            coins =  999
            coins_diff = 999
        }

        console.log('coins', coins)
        console.log('coins_diff', coins_diff)

        // Fill initial coin stacks and number labels
        dictator_recipient_TPeffect = 0 // dictator or recipient points that are destroyed by punishment or added by reward/compensation

        // dictator stack static (for static display of role labels)
        for (let i = 0; i < total_endowment; i++) {
            $(`.coinstackD-static`).append('<div class="coin" style="left:14%; "></div>');
        }
        // dictator stack
        for (let i = 0; i < total_endowment; i++) {
            $(`.coinstackD`).append('<div class="coin" style="left:14%;"></div>');
        }
        // receiver stack
        for (let i = 0; i < receiver_endowment; i++) {
            $(`.coinstackR`).append('<div class="coinR" style="left:50%;"></div>');
        }
        // dictator stack static for norm
        for (let i = 0; i < coins_diff; i++) {
            $(`.coinstackD-static-norm`).append('<div class="coin" style="left:14%;"></div>');
        }
        // receiver stack static for norm
        for (let i = 0; i < coins; i++) {
            $(`.coinstackR-static-norm`).append('<div class="coinR" style="left:50%;"></div>');
        }
        // dictator stacks dynamic for TP
        for (let i = 0; i < coins_diff; i++) {
            $(`.coinstackD-TP`).append('<div class="coin" style="left:14%;"></div>');
        }
        // receiver stacks dynamic for TP
        for (let i = 0; i < coins; i++) {
            $(`.coinstackR-TP`).append('<div class="coinR" style="left:50%;"></div>');
        }

        // Extra stacks in different locations
        // punisher in 2PP punisher stack
        for (let i = 0; i < TP_points; i++) {
            $(`.coinstackTP2PP`).append('<div class="coinown2PP" style="left:83%;"></div>');
        }
        // DG reward in 3PR
        for (let i = 0; i < dictator_recipient_TPeffect; i++) {
            $(`.coinstackTP3PR`).append('<div class="coinown3PR" style="left:7%;"></div>');
        }
        // recipient compensation in 3PC
        for (let i = 0; i < dictator_recipient_TPeffect; i++) {
            $(`.coinstackTP3PC`).append('<div class="coinown3PC" style="left:90%;"></div>');
        }
        // Destroyed coins 2PP
        for (let i = 0; i < dictator_recipient_TPeffect; i++) {
            $(`.coinstackDDes2PP`).append('<div class="coinown" style="left:75%;"></div>></div>');
        }

        // number labels
        //$('.coin-count-labelD').text(`${total_endowment}`);
        $('.coin-count-labelD-static').text(`${total_endowment}`);
        $('.coin-count-labelD-static2').text(`${total_endowment}`);
        //$('.coin-count-labelR').text(`${receiver_endowment}`);
        $('.coin-count-labelD-static-norm').text(`${coins_diff}`);
        $('.coin-count-labelR-static-norm').text(`${coins}`);
        $('.coin-count-labelD-TP').text(`${coins_diff}`);
        $('.coin-count-labelR-TP').text(`${coins}`);

        // Initialize number labels for TP (still non-class version
        $('#countTP').text(`${TP_points}`);
        $('#countD').text(`${coins_diff}`);
        $('#countR').text(`${coins}`);
        $('#countTP2PP').text(`${TP_points}`);
        // You can also initialize other labels like countDDes, countTP3PR, etc. if needed
        $('#countDDes').text(`${dictator_recipient_TPeffect}`);
        $('#countDDes2PP').text(`${dictator_recipient_TPeffect}`);
        $('#countTP3PR').text(`${dictator_recipient_TPeffect}`);
        $('#countTP3PC').text(`${dictator_recipient_TPeffect}`);


        console.log('coinstackD', ($('.coinstackD')))
        console.log('coinstackD-static', ($('.coinstackD-static')))

        // // I think because of the loop without this the stack on page load is huge
        // $('.coinstackD').empty();
        // $('.coinstackR').empty();

        function deactivateNumbers(numbersToDisable, row) { //Removed index
                // Only deactivate numbers for the "punish" row
                if (row === "punish") {
                    numbersToDisable.forEach(num => {
                        // Add 'disabled' class to numbers that are not allowed for the "punish" row
                        $('.number[data-value="' + num + '"][data-row="punish"]').addClass('disabled');
                    });
                }
            }

        // deactive punishment that would generate negative values
        let numbersToDisable = [];
        // Calculate the maximum punishment value possible based on the dictator's kept coins
        DPpossible = Math.ceil(coins_diff / TP_eff);

        // Generate the numbers that should be disabled (punishment numbers that exceed possible value)
        for (let i = DPpossible + 1; i <= TP_points; i++) {
            numbersToDisable.push(i); // Add all numbers that are larger than the max possible punishment value
            console.log('numbersToDisable', numbersToDisable)
        }

        // Only deactivate numbers in the "punish" row for specific treatments (including "3PC comp")
        if (current_treatment.includes("2PP") || current_treatment.includes("3PP") || current_treatment.includes("3PC") ) {
            // Ensure we only disable punishment numbers for the "punish" row
            deactivateNumbers(numbersToDisable, "punish");
        }

        // Formatting function to display TP cost nicely
            function formatNumber(num) {
                return Number.isInteger(num) ? num.toString() : num.toFixed(2);
            }


        ///// Only for dictator trials:
        if (current_treatment_short.includes("0DG") ) { // For dictator giving

            // add hover event listener to numbers
            $('.number').hover(function () {
                const value = $(this).data('value'); // Get the number value
                updateCoinStack(value); // Update the coin stack
            });

            let dictator = null; // Initialize

            $('.number').on('click', function () {
                // Remove 'selected' class from all buttons
                $('.number').removeClass('selected');

                // Add 'selected' class to the clicked button
                $(this).addClass('selected');

                // Get the value of the clicked button
                const value = $(this).data('value');

                console.log('Click value:', value)

                // // Update the hidden input field
                // $('#selected-dic_decision1').val(value);

                // Update the display text the clicked number
                $('#trial-dic1-display').text('' + value);
                $('#trial-dic2-display').text('' + 12 - value);

                // Update the coin stack
                updateCoinStack(value);

                dictator = value

                console.log('Dictator decision:', dictator)
            });

            // update coin stacks to original state when mouse leaves number area
            $('.number-row').mouseleave(function () {
                updateCoinStack(dictator);
            });

        }
        else { // For TPs

            // Click function - Stores last clicked stack and updates accordingly
            $('.number').on('click', function () {
                // Remove 'selected' class from all buttons in the same group
                $(this).closest('.numbers').find('.number').removeClass('selected');

                // Add 'selected' class to the clicked button
                $(this).addClass('selected');

                // Get values
                const value = $(this).data('value');
                const row = $(this).closest('.number-row-comp').length ? "compensate" : "punish";

                // Update the hidden input field (without index)
                $('.selected-number').val(value);

                // Store clicked values
                lastClickedRowType = row;
                lastClickedValue = value;

                costTP = formatNumber(value / 3);

                // Update the display text for TP cost
                $('#TP-cost-display').text('' + costTP);

                // Update the display text the clicked number
                $('#trial-2PP-display').text('' + value);
                $('#trial-3PP-display').text('' + value);
                $('#trial-3PR-display').text('' + value);
                $('#trial-3PC-display').text('' + value);

                // Extract the action from lastClickedRowType
                if (lastClickedRowType === "punish") {
                    $('#trial-3PC-row1-display').text('remove');
                    $('#trial-3PC-row2-display').text('from Person A');
                }

                if (lastClickedRowType === "compensate") {
                    $('#trial-3PC-row1-display').text('give');
                    $('#trial-3PC-row2-display').text('to Person B');
                }

                // Update the clicked stack
                updateCoinStackTP(value, row);

                // Reset the other stack
                const otherRow = row === "punish" ? "compensate" : "punish";
                updateCoinStackTP(0, otherRow);

                console.log(`Clicked decision (${row}): ${value}`);
            });

        }

        // Submit button click handler
        $('#submit-button').on('click', function () {
            // Submit the form
            $('form').submit();
        });

        // function to update the coin stack
        function updateCoinStack(count) {

                //TPupdate = TP - count
                Dupdate = total_endowment - count
                Rupdate = receiver_endowment + count

                //$('.coinstackTP').empty();
                $('.coinstackR').empty();
                $('.coinstackD').empty();

                // Add the specified number of coins
                for (let i = 0; i < Rupdate; i++) {
                    $('.coinstackR').append('<div class="coinR" style="left:50%;"></div>'); // previously: left:83
                }

                for (let i = 0; i < Dupdate; i++) {
                    $('.coinstackD').append('<div class="coin" style="left:14%;"></div>');
                }

                // Update the number labels
                $('.coin-count-labelD').text(`${Dupdate}`);
                $('.coin-count-labelR').text(`${Rupdate}`);

        }




        $('.norm').on('click', function () {
            // Remove 'selected' class from all buttons
            $(this).closest('.number-row').find('.norm').removeClass('selected');

            // Add 'selected' class to the clicked button
            $(this).addClass('selected');

            // Get the value of the clicked button
            const value = $(this).data('value');

            // Get the label from the mapping
            const label = valueToLabel[value];

            // Update the display text the clicked number
            $('#trial-norm1-display').text('' + label);
            $('#trial-norm2-display').text('"' + label + '"');

        });


        // }
    });

</script>


<style>

    body {
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin-top: 4vw;
        background-color: #f4f4f4;
    }

    .number-row {
        justify-content: center;
        display: flex;
        margin-top:1vw;
        /*gap: 1vw; PREVIOUS GAP WITH 30 ENDOWMENT !* Space between numbers scales with viewport width *!*/
        gap: 0.2vw; /* Space between numbers scales with viewport width */
        flex-wrap: wrap; /* Optional: allows wrapping if buttons exceed container width */
        align-items: center; /* Ensures proper vertical alignment */
    }

    .number-row-comp {
        justify-content: center;
        display: flex;
        margin-top:1vw;
        /*gap: 1vw; !* Space between numbers scales with viewport width *!*/
        gap: 0.2vw; /* Space between numbers scales with viewport width */
        flex-wrap: wrap; /* Optional: allows wrapping if buttons exceed container width */
        align-items: center; /* Ensures proper vertical alignment */
    }

    .number {
        width: 2.5vw; /* Width scales with viewport width */
        height: 3vw; /* Height scales with viewport width */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5vw; /* Font size scales with viewport width */
        background-color: #e0e0e0;
        border: 2px solid #000000;
        border-radius: 10%; /* Slightly rounded corners */
        cursor: pointer;
        font-family: Arial, Helvetica, sans-serif;
        transition: background-color 0.3s ease;
    }

    .norm {
        width: 6vw; /* Width scales with viewport width */
        height: 5vw; /* Height scales with viewport width */
        flex-direction: column;
        text-align: center; /* Center-aligns the text */
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 0.9vw; /* Font size scales with viewport width */
        background-color: #e0e0e0;
        border: 2px solid #000000;
        border-radius: 10%; /* Slightly rounded corners */
        cursor: pointer;
        font-family: Arial, Helvetica, sans-serif;
        transition: background-color 0.3s ease;
    }

    .number:hover {
        background-color: #ffcc00; /* Change background color on hover */
    }

    .number:active {
        background-color: #ffa500; /* Change background color on click */
    }

    .number.selected {
             background-color: #ffa500; /* Permanent color when clicked */
    }

    .number.disabled {
        background-color: #F3F3F3; /* Grey color for disabled buttons */
        border: 2px solid #d3d3d3;
        color:#d3d3d3;
        cursor: not-allowed;
        pointer-events: none; /* Disable interactions */
    }

    .norm:hover {
        background-color: #ffcc00; /* Change background color on hover */
    }

    .norm:active {
        background-color: #ffa500; /* Change background color on click */
    }

    .norm.selected {
             background-color: #ffa500; /* Permanent color when clicked */
    }

    .norm.disabled {
        background-color: #F3F3F3; /* Grey color for disabled buttons */
        border: 2px solid #d3d3d3;
        color:#d3d3d3;
        cursor: not-allowed;
        pointer-events: none; /* Disable interactions */
    }

    .responsive-div {
      width: 90%; /* Default width */
      transform-origin: top left; /* Ensure scaling starts from top-left */
      transform: scale(1); /* Default scale */
      transition: transform 0.3s ease; /* Smooth scaling */
      /*border:1px solid black;*/
      margin-left:auto;
      margin-right:auto;
    }

    .container {
        width:45%;
        height:20vw;
        margin-left:auto;
        margin-right:auto;
        border:0px solid black;
        position:relative;
    }

    .short-container {
        width:45%;
        height:8.5vw;  # shorter for dictator
        margin-left:auto;
        margin-right:auto;
        margin-top:1.5vw;
        border:0px solid black;
        position:relative;
    }

    @media (max-width: 1200px) {
      .responsive-div {
        transform: scale(1.0); /* Scale to 80% for smaller screens */
      }
      .container {
          margin-left:10vw;
      }
      .numbers {
          position:absolute;
          transform: scale(0.95);
          left:6vw;
      }
    }

    @media (max-width: 800px) {
      .responsive-div {
        transform: scale(2); /* Scale to 60% for even smaller screens */
      }
      .container {
          margin-left:1vw;
      }
      .short.container {
          margin-left:1vw;
      }
      .numbers {
          position:absolute;
          transform: scale(0.95);
          left:-3.2vw;
      }
      .number {
          font-size:2vw;
          border-width:1px;
      }
    }

    .coin-stack {
        position: absolute;
        width: 5vw; /* The stack width adjusts to 20% of the viewport width */
        max-width: 100px; /* Ensure coins don't get too big */
    }

    .coin {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }

    .coinR {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }

    .coin_destroyed {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background-color: rgba(255, 0, 0, 0.15); /* Semi-transparent red (0.5 is 50% transparency) */
        /*background: linear-gradient(145deg, #ffd700, #e6c200);*/
        /*border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        /*box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);*/
        position: absolute;
        transform: translateX(-50%);
}

    .coin_destroyed2PP {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background-color: rgba(255, 0, 0, 0.15); /* Semi-transparent red (0.5 is 50% transparency) */
        /*background: linear-gradient(145deg, #ffd700, #e6c200);*/
        /*border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        /*box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);*/
        position: absolute;
        transform: translateX(-50%);
}


    .coinown {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }

    .coinown2PP {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        /*border: 0.1vw solid #FFFFFF; !* Border size scales with the coin size *!*/
        border: 0.1vw solid darkred; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }

    .coinown3PR {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }

    .coinown3PC {
        width: 1.8vw; /* Coins take the full width of the stack container */
        min-width:10px;
        height: 8px; /* Coin height is proportional to the width */
        border-radius: 50%;
        background: linear-gradient(145deg, #ffd700, #e6c200);
        border: 0.1vw solid #FFFFFF; /* Border size scales with the coin size */
        box-shadow: inset -3px -2px 5px rgba(0, 0, 0, 0.2);
        position: absolute;
        transform: translateX(-50%);
    }


    .coin-count-labelD {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 24%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 32%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelD-static {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 24%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 32%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelD-static2 {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 24%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 32%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelD-static-norm {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 24%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 32%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelD-TP {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 24%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 32%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelR-static-norm {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 60%; /* Center horizontally, previously 73 */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 13%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelDDes {
    font-size: 1.2rem;
    color: rgba(255, 0, 0, 0.15); /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: -4%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 56%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelDDes2PP {
    font-size: 1.2rem;
    color: rgba(255, 0, 0, 0.15); /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 64%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: -10%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelR {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 60%; /* Center horizontally, previously 73 */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 13%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelR-TP {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 60%; /* Center horizontally, previously 73 */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 13%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelTP {
    font-size: 1.2rem;
    color: darkred; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 85%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 80%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelTP2PP {
    font-size: 1.2rem;
    color: darkred; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 73%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 8%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelTP3PR {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: -4%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 56%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}

    .coin-count-labelTP3PC {
    font-size: 1.2rem;
    color: #333; /* Adjust color as needed */
    position: absolute; /* Position relative to .container */
    left: 98%; /* Center horizontally */
    transform: translateX(-50%); /* Adjust for exact centering */
    top: 56%; /* Move up; adjust value as needed */
    text-align: center; /* Align text */
}


    .coin:nth-child(12)  { top: 2.7vw; }
    .coin:nth-child(11)  { top: 3.0vw; }
    .coin:nth-child(10)  { top: 3.3vw; }
    .coin:nth-child(9)   { top: 3.6vw; }
    .coin:nth-child(8)   { top: 3.9vw; }
    .coin:nth-child(7)   { top: 4.2vw; }
    .coin:nth-child(6)   { top: 4.5vw; }
    .coin:nth-child(5)   { top: 4.8vw; }
    .coin:nth-child(4)   { top: 5.1vw; }
    .coin:nth-child(3)   { top: 5.4vw; }
    .coin:nth-child(2)   { top: 5.7vw; }
    .coin:nth-child(1)   { top: 6.0vw; }

    .coinR:nth-child(12)  { top: 1.3vw; }
    .coinR:nth-child(11)  { top: 1.6vw; }
    .coinR:nth-child(10)   { top: 1.9vw; }
    .coinR:nth-child(9)   { top: 2.2vw; }
    .coinR:nth-child(8)   { top: 2.5vw; }
    .coinR:nth-child(7)   { top: 2.8vw; }
    .coinR:nth-child(6)   { top: 3.1vw; }
    .coinR:nth-child(5)   { top: 3.4vw; }
    .coinR:nth-child(4)   { top: 3.7vw; }
    .coinR:nth-child(3)   { top: 4.0vw; }
    .coinR:nth-child(2)   { top: 4.3vw; }
    .coinR:nth-child(1)  { top: 4.6vw; }

    .coinown:nth-child(10)  { top: 18.8vw; }
    .coinown:nth-child(9)   { top: 19.1vw; }
    .coinown:nth-child(8)   { top: 19.4vw; }
    .coinown:nth-child(7)   { top: 19.7vw; }
    .coinown:nth-child(6)   { top: 20.0vw; }
    .coinown:nth-child(5)   { top: 20.3vw; }
    .coinown:nth-child(4)   { top: 20.6vw; }
    .coinown:nth-child(3)   { top: 20.9vw; }
    .coinown:nth-child(2)   { top: 21.2vw; }
    .coinown:nth-child(1)   { top: 21.5vw; }

    .coinown2PP:nth-child(10)  { top: 0.6vw; }
    .coinown2PP:nth-child(9)   { top: 0.9vw; }
    .coinown2PP:nth-child(8)   { top: 1.2vw; }
    .coinown2PP:nth-child(7)   { top: 1.5vw; }
    .coinown2PP:nth-child(6)   { top: 1.8vw; }
    .coinown2PP:nth-child(5)   { top: 2.1vw; }
    .coinown2PP:nth-child(4)   { top: 2.4vw; }
    .coinown2PP:nth-child(3)   { top: 2.7vw; }
    .coinown2PP:nth-child(2)   { top: 3.0vw; }
    .coinown2PP:nth-child(1)   { top: 3.3vw; }


    .coinown3PR:nth-child(1)  { top: 15.8vw; }
.coinown3PR:nth-child(2)  { top: 15.5vw; }
.coinown3PR:nth-child(3)  { top: 15.2vw; }
.coinown3PR:nth-child(4)   { top: 14.9vw; }
.coinown3PR:nth-child(5)   { top: 14.6vw; }
.coinown3PR:nth-child(6)   { top: 14.3vw; }
.coinown3PR:nth-child(7)   { top: 14.0vw; }
.coinown3PR:nth-child(8)   { top: 13.7vw; }
.coinown3PR:nth-child(9)   { top: 13.4vw; }
.coinown3PR:nth-child(10)   { top: 13.1vw; }
.coinown3PR:nth-child(11)   { top: 12.8vw; }
.coinown3PR:nth-child(12)   { top: 12.5vw; }

.coinown3PC:nth-child(1)  { top: 15.8vw; }
.coinown3PC:nth-child(2)  { top: 15.5vw; }
.coinown3PC:nth-child(3)  { top: 15.2vw; }
.coinown3PC:nth-child(4)   { top: 14.9vw; }
.coinown3PC:nth-child(5)   { top: 14.6vw; }
.coinown3PC:nth-child(6)   { top: 14.3vw; }
.coinown3PC:nth-child(7)   { top: 14.0vw; }
.coinown3PC:nth-child(8)   { top: 13.7vw; }
.coinown3PC:nth-child(9)   { top: 13.4vw; }
.coinown3PC:nth-child(10)   { top: 13.1vw; }
.coinown3PC:nth-child(11)   { top: 12.8vw; }
.coinown3PC:nth-child(12)   { top: 12.5vw; }


.coin_destroyed:nth-child(1)  { top: 15.8vw; }
.coin_destroyed:nth-child(2)  { top: 15.5vw; }
.coin_destroyed:nth-child(3)  { top: 15.2vw; }
.coin_destroyed:nth-child(4)   { top: 14.9vw; }
.coin_destroyed:nth-child(5)   { top: 14.6vw; }
.coin_destroyed:nth-child(6)   { top: 14.3vw; }
.coin_destroyed:nth-child(7)   { top: 14.0vw; }
.coin_destroyed:nth-child(8)   { top: 13.7vw; }
.coin_destroyed:nth-child(9)   { top: 13.4vw; }
.coin_destroyed:nth-child(10)   { top: 13.1vw; }
.coin_destroyed:nth-child(11)   { top: 12.8vw; }
.coin_destroyed:nth-child(12)   { top: 12.5vw; }

.coin_destroyed2PP:nth-child(12)  { top: -3.3vw; }
    .coin_destroyed2PP:nth-child(11)  { top: -3.0vw; }
    .coin_destroyed2PP:nth-child(10)  { top: -2.7vw; }
    .coin_destroyed2PP:nth-child(9)   { top: -2.4vw; }
    .coin_destroyed2PP:nth-child(8)   { top: -2.1vw; }
    .coin_destroyed2PP:nth-child(7)   { top: -1.8vw; }
    .coin_destroyed2PP:nth-child(6)   { top: -1.5vw; }
    .coin_destroyed2PP:nth-child(5)   { top: -1.2vw; }
    .coin_destroyed2PP:nth-child(4)   { top: -0.9vw; }
    .coin_destroyed2PP:nth-child(3)   { top: -0.6vw; }
    .coin_destroyed2PP:nth-child(2)   { top: -0.3vw; }
    .coin_destroyed2PP:nth-child(1)   { top: 0.0vw; }



</style>
</head>


<body>

<form method="post">

    {{ if treatment_type == '0DG' }}

        <p>In <u>each</u> decision situation, you will be paired with a <b>different study participant</b>. You will also be assigned a role for every decision (for example, Person A or Person B).</p>

        <p>The decision situation will look like this:</p>

        <div class="container {% if '2PP' in player.treatment or '0DG' in player.treatment %}short-container{% endif %}">

            <img src="/static/global/treatments/0DG give.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 72%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 72%; right:-12%;">PERSON B</b>
                </p>

                <span class='coinstackD-static' ></span>
                <div class="coin-count-labelD-static"
                     style="top: 60%; "></div>

        </div>

        <p><strong>Person A</strong> receives 12 points.<br>
        <strong>Person B</strong> receives 0 points.</p>

        <p><strong>Person A</strong> decides how many of the 12 points to <b>give</b> to <b>Person B</b> and how many to keep for themselves. Person B does not make a decision.</p>

<!--        <hr>-->

<!--        <p>In this practice exercise, you are Person A, which is indicated by the red rectangle. You receive 12 points and Person B receives 0 points. </p>-->

<!--        <p>Now, you will decide <b style="color: red;">how many points to give</b> to Person B. To make a decision, click on a number. As you move your cursor over the numbers (or press them on your phone), you will see how many points you and Person B would receive.</p>-->

<!--        <div class="container {% if '2PP' in player.treatment or '0DG' in player.treatment %}short-container{% endif %}">-->

<!--            <img src="/static/{{ image }}" style="width:27vw; position:absolute; left:-25%; top:3vw">-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 60%; left:-25%;">PERSON A</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 60%; right:-12%;">PERSON B</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="color: red; font-size: 24px; position: absolute; top: 43%; left:-18.5%;">YOU</b>-->
<!--                </p>-->

<!--                <span class='coinstackD' ></span>-->
<!--                <div class="coin-count-labelD"-->
<!--                     style="top: 55%; "></div>-->

<!--                <span class='coinstackR' ></span>-->
<!--                <div class="coin-count-labelR"-->
<!--                 style="{% if '2PP' in player.treatment or '0DG' in player.treatment %}top: 20%;{% endif %}"></div>-->

<!--        </div>-->

<!--        <p> <strong> How many points do you <b style="color: red;">give</b> to Person B?</strong> </p>-->

<!--        <div class='numbers'>-->
<!--           <div class="number-row">-->
<!--                {{ for num in [0,1,2,3,4,5,6,7,8,9,10,11,12] }}-->
<!--                <div class="number" data-value="{{ num }}">{{ num }}</div>-->
<!--                {{ endfor }}-->
<!--            </div>-->
<!--        </div>-->

<!--        <br>-->

<!--        <p>You have decided to give <strong> <span id="trial-dic1-display"></span> </strong> point(s) to Person B and keep <strong><span id="trial-dic2-display"></span></strong> point(s) for yourself.</p>-->

<!--        <p>In this example, you were assigned to the role of Person A. You will also sometimes be assigned to the role of Person B. When you are Person B, you will not see this decision situation, because Person B does not make any decision.</p>-->

<!--        <hr>-->

<!--        <p>You will also make a decision about the <b> social acceptability</b> of Person A’s decisions. You will be shown different possible decisions of Person A. Then you decide how socially appropriate this decision is, among the following options:</p>-->

<!--        <ul>-->
<!--            <li>Very socially <strong>un</strong>appropriate</li>-->
<!--            <li>Socially <strong>un</strong>appropriate</li>-->
<!--            <li>Slightly socially <strong>un</strong>appropriate</li>-->
<!--            <li>Slightly socially appropriate</li>-->
<!--            <li>Socially appropriate</li>-->
<!--            <li>Very socially appropriate</li>-->
<!--        </ul>-->

<!--        <p>Importantly, you will receive <b>12 additional points</b> if your decision is the same as the most common decision among all other participants in {{current_country}} taking part in this study.</p>-->

<!--        <p> In this practice exercise, you will decide <b style="color: red;">how socially appropriate</b> it is for Person A to give <strong> {{random_trial_numbers.0}} </strong> point(s) to Person B and keep <strong> {{random_trial_numbers_diff.0}} </strong> point(s) for themselves. Please click on one of the six buttons.</p>-->

<!--        <div class="container {% if '2PP' in player.treatment or '0DG' in player.treatment %}short-container{% endif %}">-->

<!--            <img src="/static/{{ image }}" style="width:27vw; position:absolute; left:-25%; top:3vw">-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 60%; left:-25%;">PERSON A</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 60%; right:-12%;">PERSON B</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="color: red; font-size: 24px; position: absolute; top: 43%; left:-18.5%;">YOU</b>-->
<!--                </p>-->

<!--                <span class='coinstackD-static-norm' ></span>-->
<!--                <div class="coin-count-labelD-static-norm"-->
<!--                     style="top: 55%; "></div>-->

<!--                <span class='coinstackR-static-norm' ></span>-->
<!--                <div class="coin-count-labelR-static-norm"-->
<!--                 style="{% if '2PP' in player.treatment or '0DG' in player.treatment %}top: 20%;{% endif %}"></div>-->

<!--        </div>-->

<!--        <div class='numbers'>-->
<!--                <div class="number-row" >-->
<!--                    <div class="norm" data-value="0" >very socially<br>inappropriate</div>-->
<!--                    <div class="norm" data-value="1" >socially<br>inappropriate</div>-->
<!--                    <div class="norm" data-value="2" >slightly socially<br>inappropriate</div>-->
<!--                    <div class="norm" data-value="3" >slightly socially<br>appropriate</div>-->
<!--                    <div class="norm" data-value="4" >socially<br>appropriate</div>-->
<!--                    <div class="norm" data-value="5" >very socially<br>appropriate</div>-->
<!--                </div>-->
<!--            </div>-->

<!--        <p> <br> You have decided that Person A giving <strong> {{random_trial_numbers.0}} </strong> point(s) to Person B is <strong> <span id="trial-norm1-display"></span> </strong>.</p>-->

<!--        <p>If most other participants in {{current_country}} also choose <strong><span id="trial-norm2-display"></span></strong>, you would receive 12 points.</p>-->


    {{ endif }}


    {{ if player.round_number == 3 }}

        <p>The decisions you just made are called <strong>Stage 1</strong>.</p>

        <p>In all following decisions, there are <strong>two stages</strong>. </p>

        <p>You will see different variations of <strong>Stage 2</strong>, but <strong>Stage 1</strong> will always look like the decision you just made:</p>

        <div class="container short-container">

            <img src="/static/global/treatments/0DG give.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 72%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 72%; right:-12%;">PERSON B</b>
                </p>

                <span class='coinstackD-static' ></span>
                <div class="coin-count-labelD-static"
                     style="top: 60%; "></div>

        </div>
        <p><strong>Person A</strong> receives 12 points.<br>
        <strong>Person B</strong> receives 0 points.</p>

        <p><strong>Person A</strong> decides how many of the 12 points to give to Person B.</p>

        <hr>

        <p> <b>After</b> Person A makes a decision, <strong>Stage 2</strong> begins.</p>

        {{ if treatment_type == '2PP' }}

            <p>In <b>Stage 2</b>, <b>Person B</b> is able to <strong>remove points</strong> from <strong>Person A</strong>. </p>

            <p>Person A and Person B both receive 4 points in Stage 2. Only Person B can use these points to remove points from Person A. Only Person A's remaining points from Stage 1 can be removed. Removed points are eliminated and cannot be used by anyone. Removing <b>3 points</b> from Person A will cost Person B <b>1 point</b> (cost of removing 1 point: 0.33 points).</p>

            <div class="container {% if '2PP' in player.treatment or '0DG' in player.treatment %}short-container{% endif %}">

            <img src="/static/global/treatments/2PP_2 punish.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 72%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 72%; right:-12%;">PERSON B</b>
                </p>

                <img src="/static/global/punish arrow orange.png" alt="-" style="position: absolute; width: 8vw; top: 5%; left: 23%;">
                <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: -18%; left: 40%;">

<!--                <span class='coinstackD-static' ></span>-->
<!--                <div class="coin-count-labelD-static2"-->
<!--                     style="top: 60%; "></div>-->

        </div>

        {{ else }}

            <p>In <b>Stage 2</b>, you will be joined by a <strong>third person: Person C.
            Person C</strong> will decide whether to change the points of Person A or Person B.
            The possible choices of Person C will be explained below.</p>

            <div class="container">

            <img src="/static/global/treatments/3PC comp.png" style="width:27vw; position:absolute; left:-25%; top:3vw">

                <p>
                    <b style="position: absolute; top: 36%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 36%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 85%; left:34%;">PERSON C</b>
                </p>

                <span class='coinstackD-static' ></span>
                <div class="coin-count-labelD-static2"
                     style="top: 33%; "></div>

        </div>

        {{ endif }}


    {{ endif }}


    {{ if treatment_type == '3PP' and player.round_number < 14 }}

<!--        {{ if first_block_2PP_true == True and player.round_number == 6 }}-->
<!--            <p>In the next part, you will be joined by a <strong>third person: Person C. Person C</strong> will decide whether to change the points of Person A or Person B. The possible choices of Person C will be explained below. Person B will again not be able to make a decision.</p>-->

<!--            <div class="container">-->

<!--            <img src="/static/global/treatments/3PC comp.png" style="width:27vw; position:absolute; left:-25%; top:3vw">-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 36%; left:-25%;">PERSON A</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 36%; right:-12%;">PERSON B</b>-->
<!--                </p>-->

<!--                <p>-->
<!--                    <b style="position: absolute; top: 85%; left:34%;">PERSON C</b>-->
<!--                </p>-->

<!--                <span class='coinstackD-static' ></span>-->
<!--                <div class="coin-count-labelD-static2"-->
<!--                     style="top: 33%; "></div>-->

<!--        </div>-->

<!--            <hr>-->

<!--        {{ endif }}-->

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <div class="container">

            <img src="/static/global/treatments/3PP punish.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 29%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 29%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 92%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 52%; left: 11%;">


<!--                <span class='coinstackD-static' ></span>-->
<!--                <div class="coin-count-labelD-static2"-->
<!--                     style="top: 33%; "></div>-->

        </div>

        <br>

        <p>You will be joined by a third person: <b >Person C.</b> </p>

        <p> In Stage 2, <b style="color: red; ">Person C</b> is able to <b>remove points</b> from Person A. Person B is <u>not anymore</u> able to make a decision.</p>

        <p> Person C receives 4 points in Stage 2 and can use these points to remove points from Person A. Removed points are eliminated and cannot be used by anyone. Removing <b>3 points</b> from Person A will cost Person C <b>1 point</b> (cost of removing 1 point: 0.33 points).</p>

        <p> You will be assigned different roles at different times: Person A, Person B, or Person C. When you are Person B, you will not be asked to make any decision, because Person B is not able to make a decision.</p>

<!--        <hr>-->

<!--        <p>In this practice exercise, you are <strong>Person C</strong>, which is indicated by the red rectangle. In Stage 1, Person A kept <strong> {{random_trial_numbers_diff.2}} </strong> point(s) and gave <strong> {{random_trial_numbers.2}} </strong> point(s) to Person B. </p>-->

<!--        <p>Now, you decide how many points to <b style="color: red;">remove</b> from Person A. To make a decision, click on a number. As you move your cursor over the numbers (or press them on your phone), you will see how many points Person A would lose.</p>-->

<!--        <div class="container" >-->

<!--                <img src="/static/global/treatments/3PP punish.png" style="width:27vw; position:absolute; left:-25%; top:3vw">-->


<!--                    <p>-->
<!--                    <b style="position: absolute; top: 36%; left:-25%;">PERSON A</b>-->
<!--                    </p>-->

<!--                    <p>-->
<!--                        <b style="position: absolute; top: 36%; right:-13%;">PERSON B</b>-->
<!--                    </p>-->

<!--                    <p>-->
<!--                        <b style="position: absolute; top: 85%; left:34%;">PERSON C</b>-->
<!--                    </p>-->

<!--                <span class='coinstackD-TP' ></span>-->
<!--                <div class="coin-count-labelD"-->
<!--                     style="{% if '2PP' in player.treatment %}top: 55%;{% endif %}"-->
<!--                     id="countD" ></div>-->

<!--                <span class='coinstackR-TP' ></span>-->
<!--                <div class="coin-count-labelR"-->
<!--                     style="{% if '2PP' in player.treatment %}top: 20%;{% endif %}"-->
<!--                     id="countR" ></div>-->


<!--                <span class='coinstack coinstackDDes' ></span>-->
<!--                <div class="coin-count-labelDDes" id="countDDes" ></div>-->

<!--                    <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 55%; left: 12%;">-->

<!--                    <p>-->
<!--                        <b style="color: red; font-size: 24px; position: absolute; top: 75%; left:38.5%;">YOU</b>-->
<!--                    </p>-->


<!--            </div>-->


<!--        <p> <strong> How many points do you <b style="color: red;">remove</b> from Person A?</strong> </p>-->

<!--        <div class='numbers'>-->
<!--           <div class="number-row" data-row="punish">-->
<!--                {{ for num in [0,1,2,3,4,5,6,7,8,9,10,11,12] }}-->
<!--                <div class="number" data-value="{{ num }}" data-row="punish">{{ num }}</div>-->
<!--                {{ endfor }}-->
<!--            </div>-->
<!--            <br>-->
<!--            {% if "3PC" in player.treatment%}-->
<!--            <p> <strong>How many points do you <b style="color: red;"> give </b> to Person B? </strong> </p>-->

<!--            <div class="number-row-comp" data-row="compensate" >-->
<!--                {{ for num in [0,1,2,3,4,5,6,7,8,9,10,11,12] }}-->
<!--                <div class="number" data-value="{{ num }}" data-row="compensate" >{{ num }}</div>-->
<!--                {{ endfor }}-->
<!--            </div>-->
<!--            {% endif %}-->
<!--        </div>-->


<!--        <br>-->

<!--        <p>You have decided to remove <strong> <span id="trial-3PP-display"></span> </strong> point(s) from Person A. This costs you <span id="TP-cost-display"></span> point(s). </p>-->



<!--        <p>In this example, Person A gave <strong> {{random_trial_numbers.2}} </strong> point(s) to Person B. For the real decisions, you will see different possible cases, where Person A gives varying points to Person B.</p>-->

<!--        <p>As before, you will also sometimes be assigned to the role of Person A or Person B.</p>-->

<!--        <p>Additionally, you will make a decision about the social acceptability of Person C’s decision to remove points from Person A.</p>-->



    {{ endif }}



    {{ if treatment_type == '3PR' and player.round_number < 14 }}

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <div class="container">

            <img src="/static/global/treatments/3PP punish.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 29%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 29%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 92%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/plus_button.png" alt="+" style="position: absolute; width: 1.8vw; top: 52%; left: 11%;">

        </div>

        <br>

        <p> In Stage 2, <b>Person C</b> is able to <b style="color: red; ">give points</b> to Person A. Person C is <u>not anymore</u> able to remove points. </p>

        <p> Person C receives 4 points in Stage 2 and can use these points to give points to Person A. Giving <b>3 points</b> to Person A will cost Person C <b>1 point</b> (cost of giving 1 point: 0.33 points).</p>


    {{ endif }}



    {{ if treatment_type == '3PC' and player.round_number < 14 }}

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <div class="container">

            <img src="/static/global/treatments/3PC comp.png" style="width:27vw; position:absolute; left:-25%; top:0vw">

                <p>
                    <b style="position: absolute; top: 29%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 29%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 92%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 52%; left: 11%;">
            <img src="/static/global/plus_button.png" alt="+" style="position: absolute; width: 1.8vw; top: 52%; left: 75%;">

        </div>

        <br>

        <p> In Stage 2, <b>Person C</b> is able to <u>either</u> <b style="color: red; ">remove points</b> from <b>Person A</b> <b style="color: red; "> <u>or</u> give points</b> to <b>Person B</b>. Person C <u>cannot</u> both give points and remove points, they must choose <u>one</u> action.

        <p> Person C receives 4 points in Stage 2 and can use these points to remove or give points. Removed points are eliminated and cannot be used by anyone. Removing <b>3 points</b> from Person A OR giving <b>3 points</b> to Person B will cost Person C <b>1 point</b> (cost of removing OR giving 1 point: 0.33 points).</p>


    {{ endif }}



    {{ if block2 == True and treatment_type == '3PC' }}

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <p>You will know if Person A and Person B <b style="color: red; ">also live in {{current_country}}</b> or in <b style="color: red; ">one of {{C.NUM_COUNTRIES}} countries</b> around the globe which also participate in this study:</p>

        <p> <i>Algeria, Australia, Brazil, Chile, China, Ecuador, Egypt, Estonia, Finland, France, Germany, Greece, Hungary, India, Indonesia, Israel, Italy, Japan, Kazakhstan, Kenya, Korea, Malaysia, Mexico, Morocco, Nigeria, Norway, Pakistan, Peru, Philippines, Poland, Romania, Russia, Saudi Arabia, Singapore, South Africa, Spain, Switzerland, Taiwan, Thailand, Turkey, UAE, United States, Uruguay, Venezuela, Vietnam </i> </p>

        <p>Here is an example:</p>

        <div class="container">


            <img src="" style='width:50%; position:absolute; right:19.2vw' class='dictatorCountry'>
            <img src="" style='width:50%; position:absolute; left:17.8vw' class='receiverCountry'>

            <img src="" style='width:50%; position:absolute; top:7vw; right:25vw' class='dictatorCountryMap'>
            <img src="" style='width:50%; position:absolute; top:7vw; left:22vw' class='receiverCountryMap'>


            <img src="/static/global/treatments/3PC comp.png" style="width:27vw; position:absolute; left:-25%; top:3vw">

                <p>
                    <b style="position: absolute; top: 44%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 44%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 107%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 67%; left: 11%;">
            <img src="/static/global/plus_button.png" alt="+" style="position: absolute; width: 1.8vw; top: 67%; left: 75%;">

<!--                <span class='coinstackD-static' ></span>-->
<!--                <div class="coin-count-labelD-static2"-->
<!--                     style="top: 33%; "></div>-->

        </div>

        <br>  <br> <br>


        <p>In this example, Person A lives in <b>{{dic_identity_country}}</b> and Person B lives in <b>{{recip_identity_country}}</b>. </p>

        <p> You will not see where Person C lives. </p>

        <p> <b>Person C</b> is <u>still able</u> to <u>either</u> <b>remove points</b> from Person A <u>or</u> <b>give points</b> to Person B. </p>

        <hr>

    {{ endif }}


    {{ if block2 == True and treatment_type == '3PP' }}

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <div class="container">


                <img src="" style='width:50%; position:absolute; right:19.2vw' class='dictatorCountry'>
                <img src="" style='width:50%; position:absolute; left:17.8vw' class='receiverCountry'>

                <img src="" style='width:50%; position:absolute; top:7vw; right:25vw' class='dictatorCountryMap'>
                <img src="" style='width:50%; position:absolute; top:7vw; left:22vw' class='receiverCountryMap'>


                <img src="/static/global/treatments/3PP punish.png" style="width:27vw; position:absolute; left:-25%; top:3vw">

                    <p>
                    <b style="position: absolute; top: 44%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 44%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 107%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 67%; left: 11%;">


            </div>

        <br> <br>  <br>

        <p>In Stage 2, <b>Person C</b> is able to <b style="color: red; ">remove points</b> from Person A. Person C is <u>not anymore</u> able to give points to Person B. </p>

    {{ endif }}


    {{ if block3 == True }}

        <p style="color: red; text-align: center; "> <b>Now there is one change.</b> </p>

        <p>You will know <b style="color: red; ">in which specific country</b> Person A and Person B live.</p>

        <p>Here is an example:</p>

        <div class="container">


            <img src="" style='width:50%; position:absolute; right:19.2vw' class='dictatorCountry'>
            <img src="" style='width:50%; position:absolute; left:17.8vw' class='receiverCountry'>

            <img src="" style='width:50%; position:absolute; top:7vw; right:25vw' class='dictatorCountryMap'>
            <img src="" style='width:50%; position:absolute; top:7vw; left:22vw' class='receiverCountryMap'>


            <img src="/static/global/treatments/3PP punish.png" style="width:27vw; position:absolute; left:-25%; top:3vw">

                <p>
                    <b style="position: absolute; top: 44%; left:-25%;">PERSON A</b>
                </p>

                <p>
                    <b style="position: absolute; top: 44%; right:-12%;">PERSON B</b>
                </p>

                <p>
                    <b style="position: absolute; top: 107%; left:34%;">PERSON C</b>
                </p>

            <img src="/static/global/minus_button2.png" alt="-" style="position: absolute; width: 1.8vw; top: 67%; left: 11%;">


        </div>

        <br> <br> <br>

        <p> Person A lives in <b style="color: red; ">{{dic_identity_country}}</b> and Person B lives in <b style="color: red; ">{{recip_identity_country}}</b>.</p>

        <p> You will not see where Person C lives. </p>

        <p> <b>Person C</b> is <u>still able</u> to <b>remove points</b> from Person A. </p>


    {{ endif }}

    <br>

    <div style="display: flex; justify-content: flex-end">
        <button style="color: #fff;
                       background-color: #007bff;
                       border: 1px solid #007bff;
                       font-size: 1rem;
                       border-radius: 0.25rem;
                       padding: 4px 12px;" type="button" id="submit-button">
            Understood!
        </button>
    </div>

</form>




</body>
</html>

{{ endblock }}
